add_namespace = malta

# The fall of the order
country_event = {
	id = malta.1
	immediate = { log = "[GetDateText]: [Root.GetName]: event malta.1" }
	title = malta.1.t
	desc = { 
		text = malta.1.d.kerensky_lives
		trigger = {
			RUS = {
				has_country_leader = {
					name = "Alexandr Kerensky"
					ruling_only = yes
				}
			}
		}
	}
	desc = { 
		text = malta.1.d
		trigger = {
			RUS = {
				NOT = {
					has_country_leader = {
						name = "Alexandr Kerensky"
						ruling_only = yes
					}
				}
			}
		}
	}
	
	picture = GFX_report_event_MLT_Whisper

	trigger = {
		tag = GER
		date > 1936.11.5
		NOT = {
			has_ideas = GER_black_monday_groener_2
			has_ideas = GER_black_monday_schacht_2
		}
	}

	fire_only_once = yes

	option = {
		name = malta.1.a
		hidden_effect = {
			news_event = {
				id = malta.3
			}
			news_event = {
				id = malta.2
				days = 10
			}
		}
	}
}

news_event = {
	id = malta.2
	immediate = { log = "[GetDateText]: [Root.GetName]: event malta.2" }
	title = malta.2.t
	desc = malta.2.d
	picture = GFX_news_event_Malta_1

	major = yes

	is_triggered_only = yes

	trigger = {
		wants_world_news = yes
	}

	show_major = {
		NOT = {
			tag = MLT
		}
	}

	option = {
		name = malta.2.a
		hidden_effect = {
			hidden_effect = {
			set_global_flag = sons_of_malta_gone
				every_other_country = {
					if = { 
						limit = { has_idea = MLT_sons_of_malta }
						remove_ideas = MLT_sons_of_malta
					}
				}
				every_other_country = {
					if = { 
						limit = { has_idea = hidden_support_natpop }
						remove_ideas = hidden_support_natpop
					}
				}
				every_other_country = {
					if = { 
						limit = { has_idea = hidden_support_SRI }
						remove_ideas = hidden_support_SRI
					}
				}
				every_other_country = {
					if = { 
						limit = { has_idea = hidden_support_LIB }
						remove_ideas = hidden_support_LIB
					}
				}
				every_other_country = {
					if = { 
						limit = { has_idea = hidden_support_LEC }
						remove_ideas = hidden_support_LEC
					}
				}
				every_other_country = {
					if = { 
						limit = { has_idea = hidden_support_USA }
						remove_ideas = hidden_support_USA
					}
				}
				every_other_country = {
					if = { 
						limit = { has_idea = hidden_support_CAN }
						remove_ideas = hidden_support_CAN
					}
				}
				every_other_country = {
					if = { 
						limit = { has_idea = hidden_support_ITA_PAP }
						remove_ideas = hidden_support_ITA_PAP
					}
				}
				every_other_country = {
					if = { 
						limit = { has_idea = hidden_support_GER }
						remove_ideas = hidden_support_GER
					}
				}
			}
		}
	}
}

news_event = {
	id = malta.3
	immediate = { log = "[GetDateText]: [Root.GetName]: event malta.3" }
	title = malta.3.t
	desc = { 
		text = malta.3.d.kerensky_lives
		trigger = {
			RUS = {
				has_country_leader = {
					name = "Alexandr Kerensky"
					ruling_only = yes
				}
			}
		}
	}
	desc = { 
		text = malta.3.d
		trigger = {
			RUS = {
				NOT = {
					has_country_leader = {
						name = "Alexandr Kerensky"
						ruling_only = yes
					}
				}
			}
		}
	}
	picture = GFX_news_event_Malta_2

	major = yes

	is_triggered_only = yes

	trigger = {
		wants_world_news = yes
	}

	show_major = {
		NOT = {
			tag = MLT
		}
	}

	option = {
		name = malta.3.a
		set_global_flag = Malta_Revealed
	}
}

country_event = { #Hidden Event for Nations to get the spirit
	id = malta.4
	immediate = { 
		log = "[GetDateText]: [Root.GetName]: event malta.4" 
	}

	hidden = yes

	trigger = {
		OR = {
			tag = ITA
			tag = PAP
			tag = SRI
			tag = LEP
			tag = LEC
			tag = JAP
			tag = SQI
			tag = JAP
			tag = GEA
			tag = OTT
			tag = ETH
			tag = LIB
			tag = MAF
			tag = SPR
			tag = GER
			tag = MEX
			tag = BRA
			tag = USA
			tag = RUS
		}
		NOT = {	
			has_global_flag = sons_of_malta_gone
			has_idea = MLT_sons_of_malta
		}
	}
	option = {
		add_ideas = MLT_sons_of_malta
	}
}

news_event = { #Hidden Event for Nations to get the spirit
	id = malta.400
	immediate = { 
		log = "[GetDateText]: [Root.GetName]: event malta.400" 
		add_ideas = MLT_sons_of_malta_base
	}
	picture = GFX_news_event_internationale

	hidden = yes

	trigger = {
		tag = MLT
		NOT = {	
			has_global_flag = sons_of_malta_gone
			has_idea = MLT_sons_of_malta_base
		}
	}
}

country_event = { #Hidden Event for Nations to get the spirit
	id = malta.5
	immediate = { 
		log = "[GetDateText]: [Root.GetName]: event malta.5" 
		add_ideas = hidden_support_ITA_PAP
	}
	picture = GFX_country_event_internationale

	hidden = yes

	trigger = {
		OR = {
			tag = ITA
			tag = PAP
		}
		NOT = {	
			has_global_flag = sons_of_malta_gone
			has_idea = hidden_support_ITA_PAP
		}
	}
}

country_event = { #Hidden Event for Nations to get the spirit
	id = malta.6
	immediate = { 
		log = "[GetDateText]: [Root.GetName]: event malta.6" 
		add_ideas = hidden_support_CAN
	}
	picture = GFX_country_event_internationale

	hidden = yes

	trigger = {
		tag = CAN
		NOT = {	
			has_global_flag = sons_of_malta_gone
			has_idea = hidden_support_CAN
		}
	}
}

country_event = { #Hidden Event for Nations to get the spirit
	id = malta.7
	immediate = { 
		log = "[GetDateText]: [Root.GetName]: event malta.7" 
		add_ideas = hidden_support_USA
	}
	picture = GFX_country_event_internationale

	hidden = yes

	trigger = {
		tag = USA
		NOT = {	
			has_global_flag = sons_of_malta_gone
			has_idea = hidden_support_USA
		}
	}
}

country_event = { #Hidden Event for Nations to get the spirit
	id = malta.8
	immediate = { 
		log = "[GetDateText]: [Root.GetName]: event malta.8" 
		add_ideas = hidden_support_LEC
	}
	picture = GFX_country_event_internationale

	hidden = yes

	trigger = {
		tag = LEC
		NOT = {	
			has_global_flag = sons_of_malta_gone
			has_idea = hidden_support_LEC
		}
	}
}

country_event = { #Hidden Event for Nations to get the spirit
	id = malta.9
	immediate = { 
		log = "[GetDateText]: [Root.GetName]: event malta.9" 
		add_ideas = hidden_support_LIB
	}
	picture = GFX_country_event_internationale

	hidden = yes

	trigger = {
		tag = LIB
		NOT = {	
			has_global_flag = sons_of_malta_gone
			has_idea = hidden_support_LIB
		}
	}
}

country_event = { #Hidden Event for Nations to get the spirit
	id = malta.9
	immediate = { 
		log = "[GetDateText]: [Root.GetName]: event malta.9" 
		add_ideas = hidden_support_SRI
	}
	picture = GFX_country_event_internationale

	hidden = yes

	trigger = {
		tag = SRI
		NOT = {	
			has_global_flag = sons_of_malta_gone
			has_idea = hidden_support_SRI
		}
	}
}

country_event = { #Hidden Event for Nations to get the spirit
	id = malta.11
	immediate = { 
		log = "[GetDateText]: [Root.GetName]: event malta.11" 
		add_ideas = hidden_support_GER
	}
	picture = GFX_country_event_internationale

	hidden = yes

	trigger = {
		tag = GER
		NOT = {	
			has_global_flag = sons_of_malta_gone
			has_idea = hidden_support_GER
		}
	}
}

country_event = { #Hidden Event for Nations to get the spirit
	id = malta.10
	immediate = { 
		log = "[GetDateText]: [Root.GetName]: event malta.10" 
		add_ideas = hidden_support_natpop
	}
	picture = GFX_country_event_internationale

	hidden = yes

	trigger = {
		OR = {
			tag = SQI
			tag = JAP
			tag = QIE
			tag = LEP
			tag = RUS
		}
		NOT = {	
			has_global_flag = sons_of_malta_gone
			has_idea = hidden_support_natpop
		}
	}
}
