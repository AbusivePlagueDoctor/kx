COL_coup_risk_increase = {
	custom_effect_tooltip = COL_army_coup_risk_rise_tt
	hidden_effect = {
		add_to_variable = {
			var = COL_army_coup_risk
			value = 1
		}
	}
}

COL_coup_risk_decrease = {
	#if = {
		#limit = {
			#check_variable = {
				#var = COL_army_coup_risk
				#value = 1
				#compare = greater_than_or_equals
			#}
		#}
		custom_effect_tooltip = COL_army_coup_risk_lower_tt
		hidden_effect = {
			subtract_from_variable = {
				var = COL_army_coup_risk
				value = 1
			}
		}
	#}
}

COL_choose_industrialist_hardline = {
	if = {
		limit = {
			has_country_flag = COL_hardline_protest_commune
		}
		country_event = {
			id = col.43
			days = 3
		}
	}
	if = {
		limit = {
			NOT = {
				has_country_flag = COL_hardline_protest_commune
			}
		}
		country_event = {
			id = col.57
			days = 3
		}
	}
}

COL_setup_for_COLCW = { #SETUP TO PLAY AS COMMUNE IN CIVIL WAR
	#COL_remove_all_generals = yes
	#COC = { COL_remove_all_generals = yes }
	#COL_add_government_generals = yes
	#COL_add_neutral_generals = yes
	custom_effect_tooltip = COL_CW_militia_unit_tt
	
	COC = { transfer_state = 486 }
	COC = { transfer_state = 851 }
	
	hidden_effect = {
		COC = {
			add_state_core = 486 #meta
			add_state_core = 851 #caqueta
			#every_owned_state = {
				#limit = { is_core_of = COC }
				#COC = { transfer_state = PREV }
			#}
			every_state = {
				limit = {
					is_core_of = COL
					NOT = { is_core_of = COC }
					NOT = { is_claimed_by = COC }
				}
				add_claim_by = COC
			}
			#set_capital = 486
			every_owned_state = {
				teleport_armies = {
					limit = { tag = COL }
					to_state_array = owned_controlled_states
				}
			}
			if = { #PLAY AS REBELS/COMMUNE - UNIR
				limit = { has_global_flag = COL_communeUNIR }
				COL_commune_cano_and_generals = yes
				add_popularity = {
					ideology = syndicalist
					popularity = 0.07
				}
				add_popularity = {
					ideology = totalist
					popularity = 0.07
				}
				add_popularity = {
					ideology = radical_socialist
					popularity = 0.07
				}
				set_politics = {
					ruling_party = radical_socialist
					elections_allowed = no
				}
				set_cosmetic_tag = COL_playcommuneunir
			}
			if = { #PLAY AS REBELS/COMMUNE - SYNDIE
				limit = { has_global_flag = COL_communesyndicalist }
				COL_commune_cano_and_generals = yes
				add_popularity = {
					ideology = syndicalist
					popularity = 0.09
				}
				add_popularity = {
					ideology = totalist
					popularity = 0.07
				}
				add_popularity = {
					ideology = radical_socialist
					popularity = 0.05
				}
				set_politics = {
					ruling_party = syndicalist
					elections_allowed = no
				}
				set_cosmetic_tag = COL_playcommunesyndie
			}
			if = { #PLAY AS REBELS/COMMUNE - TOTALIST
				limit = { has_global_flag = COL_communetotalist }
				COL_commune_cano_and_generals = yes
				add_popularity = {
					ideology = syndicalist
					popularity = 0.07
				}
				add_popularity = {
					ideology = totalist
					popularity = 0.09
				}
				add_popularity = {
					ideology = radical_socialist
					popularity = 0.03
				}
				#COL_add_royalist_generals  = yes
				set_politics = {
					ruling_party = totalist
					elections_allowed = no
				}
				set_cosmetic_tag = COL_playcommunetot
			}
			division_template = {
				name = "Division Gaitanista Colombiana" #INF
				division_names_group = COL_INF_01
				regiments = {
					infantry = { x = 0 y = 0 }
					infantry = { x = 0 y = 1 }
					infantry = { x = 0 y = 2 }
					infantry = { x = 1 y = 0 }
					infantry = { x = 1 y = 1 }
					infantry = { x = 1 y = 2 }
				}
			}
			division_template = {
				name = "Milicia Socialista Revolucionaria" #MILITIA
				division_names_group = COL_INF_01
				regiments = {
					militia = { x = 0 y = 0 }
					militia = { x = 0 y = 1 }
					militia = { x = 0 y = 2 }
					militia = { x = 1 y = 0 }
					militia = { x = 1 y = 1 }
					militia = { x = 1 y = 2 }
					militia = { x = 2 y = 0 }
				}
			}
			set_variable = { strength = COL.num_divisions }
			multiply_variable = { var = strength value = 0.75 }
			clamp_variable = { var = strength max = 20 min = 4 }
			set_variable = { counter = 0 }
			486 = { #meta
				create_unit = {
					division = "division_template = \"Milicia Socialista Revolucionaria\" start_experience_factor = 0.3"
					owner = COC
					prioritize_location = 1887 #villavicencio
				}
				create_unit = {
					division = "division_template = \"Division Gaitanista Colombiana\" start_experience_factor = 0.3"
					owner = COC
					prioritize_location = 1887 #villavicencio
				}
			}
			851 = { #caqueta			
				create_unit = {
					division = "division_template = \"Milicia Socialista Revolucionaria\" start_experience_factor = 0.2"
					owner = COC
					prioritize_location = 13391 #florencia
				}
			}
			subtract_from_variable = { var = strength value = 3 }
			COL_add_rebel_units = yes
			clear_veriable = strength
			if = {
				limit = { has_template = "División de Infanteria" }
				delete_unit_template_and_units = { division_template = "División de Infanteria" }
			}
			if = {
				limit = { has_template = "División de Caballeria" }
				delete_unit_template_and_units = { division_template = "División de Caballeria" }
			}
			if = {
				limit = { has_template = "Guardia" }
				delete_unit_template_and_units = { division_template = "Guardia" }
			}
			country_event = { id = col.100 hours = 5 } #COLCW starts
			add_stability = 0.10 #Player's Buff
		}
		
		COL = {
			COC = { transfer_technology = yes }
			hidden_effect = {
				add_popularity = {
					ideology = paternal_autocrat
					popularity = 0.10
				}
				add_popularity = {
					ideology = authoritarian_democrat
					popularity = 0.02
				}
				add_popularity = {
					ideology = national_populist
					popularity = 0.02
				}
			}
			send_equipment_fraction = { target = COC value = 0.40 }
			every_owned_state = {
				teleport_armies = {
					limit = { tag = COC }
					to_state_array = owned_controlled_states
				}
			}
			add_war_support = 0.15
			COL_CW_ideas_removal = yes
			COC = { COC_CW_idea_add = yes }
		}
	}
}

COL_commune_cano_and_generals = { #for Colombian CV setup
	set_popularities = {
		totalist = var:COL.party_popularity_100@totalist
		syndicalist = var:COL.party_popularity_100@syndicalist
		radical_socialist = var:COL.party_popularity_100@radical_socialist
		social_democrat = var:COL.party_popularity_100@social_democrat
		social_liberal = var:COL.party_popularity_100@social_liberal
		market_liberal = var:COL.party_popularity_100@market_liberal
		social_conservative = var:COL.party_popularity_100@social_conservative
		authoritarian_democrat = var:COL.party_popularity_100@authoritarian_democrat
		paternal_autocrat = var:COL.party_popularity_100@paternal_autocrat
		national_populist = var:COL.party_popularity_100@national_populist
	}
	add_popularity = {
		ideology = paternal_autocrat
		popularity = -0.15
	}
	add_popularity = {
		ideology = authoritarian_democrat
		popularity = -0.1
	}
	add_popularity = {
		ideology = national_populist
		popularity = -0.1
	}
	add_manpower = 15000
	#retire_country_leader = yes
	#retire_ideology_leader = radical_socialist
	#retire_ideology_leader = syndicalist
	#retire_ideology_leader = totalist
	#create_country_leader = {
		#name = "María de los Ángeles Cano"
		#desc = "POLITICS_COL_CANO_DESC"
		#picture = "Portrait_Columbia_Maria_Cano.tga"
		#expire = "1965.1.1"
		#ideology = radical_socialist_subtype
	#}
	#create_country_leader = {
		#name = "María de los Ángeles Cano"
		#desc = "POLITICS_COL_CANO_DESC"
		#picture = "Portrait_Columbia_Maria_Cano.tga"
		#expire = "1965.1.1"
		#ideology = syndicalist_subtype
	#}
	#create_country_leader = {
		#name = "María de los Ángeles Cano"
		#desc = "POLITICS_COL_CANO_DESC"
		#picture = "Portrait_Columbia_Maria_Cano.tga"
		#expire = "1965.1.1"
		#ideology = totalist_subtype
	#}
	add_ideas = COL_Leon_de_Greiff_hog_rso
	add_ideas = COL_Jose_Antonio_Osorio_for_rso
	add_ideas = COL_Ignacio_Torres_Giraldo_eco_rso
	add_ideas = COL_Juan_de_la_Cruz_Varela_sec_rso
	#event_target:SIA_Phraya_Srisitthisongkhram = { set_nationality = PREV }
	#event_target:SIA_Prince_Boworadet = { set_nationality = PREV }
	#event_target:SIA_Phrayra_Rithhi_arkaney = { set_nationality = PREV }
	#transfer_state =
	#transfer_state =
	#transfer_state =
}

COL_add_rebel_units = { #always fire
	random_owned_controlled_state = {
		create_unit = {
			division = "division_template = \"Milicia Socialista Revolucionaria\" start_experience_factor = 0.2"
			owner = COC
		}
	}
	subtract_from_variable = { var = strength value = 1 }
	if = {
		limit = { 
			check_variable = { strength > 0.99 } 
		}
		add_to_variable = { var = counter value = 1 }
		if = {
			limit = { 
				check_variable = { counter > 3.99 } 
			}
			COL_add_inf_rebel_units = yes
		}
		if = {
			limit = { 
				check_variable = { counter < 4 } 
			}
			COL_add_rebel_units = yes
		}
	}
}

COL_add_inf_rebel_units = { #always fire
	random_owned_controlled_state = {
		create_unit = {
			division = "division_template = \"Division Gaitanista Colombiana\" start_experience_factor = 0.3"
			owner = COC
			prioritize_location = 1887 #villavicencio
		}
	}
	subtract_from_variable = { var = strength value = 1 }
	if = {
		limit = { check_variable = { strength > 0.99 } }
		COL_add_rebel_units = yes
	}
}

COL_leftwing_idea_removal = { #idea removal leftwing governament for COL
	hidden_effect = {
		COL = {
			if = {
				limit = { has_idea = COL_religious_schools }
				remove_ideas = COL_religious_schools
				set_country_flag = COL_had_religious_schools
			}
			if = {
				limit = { has_idea = COL_reform_mil_academies }
				remove_ideas = COL_reform_mil_academies
				set_country_flag = COL_had_reform_mil_academies
			}
			if = {
				limit = { has_idea = COL_helping_the_darien }
				remove_ideas = COL_helping_the_darien
				set_country_flag = COL_had_helping_the_darien
			}
			if = {
				limit = { has_idea = COL_exiling_enemies }
				remove_ideas = COL_exiling_enemies
				set_country_flag = COL_had_exiling_enemies
			}
			if = {
				limit = { has_idea = COL_exiling_enemies_heavy }
				remove_ideas = COL_exiling_enemies_heavy
				set_country_flag = COL_had_exiling_enemies_heavy
			}
			if = {
				limit = { has_idea = COL_airdisaster }
				remove_ideas = COL_airdisaster
				set_country_flag = COL_had_airdisaster
			}
		}
	}
}

COL_rightwing_idea_removal = { #idea removal rightwing governament for COL
	hidden_effect = {
		COL = {
			if = {
				limit = { has_idea = COL_industrialist_protest }
				remove_ideas = COL_industrialist_protest
				set_country_flag = COL_had_industrialist_protest
			}
			if = {
				limit = { has_idea = COL_industrialist_protest_crushed }
				remove_ideas = COL_industrialist_protest_crushed
				set_country_flag = COL_had_industrialist_protest_crushed
			}
			if = {
				limit = { has_idea = COL_armedminorities }
				remove_ideas = COL_armedminorities
				set_country_flag = COL_had_armedminorities
			}
			if = {
				limit = { has_idea = COL_tradecongress }
				remove_ideas = COL_tradecongress
				set_country_flag = COL_had_tradecongress
			}
			if = {
				limit = { has_idea = COL_airdisaster }
				remove_ideas = COL_airdisaster
				set_country_flag = COL_had_airdisaster
			}
		}
	}
}

COL_CW_ideas_removal = { #ideas removal rightwing COL CW
	hidden_effect = {
		COL = {
			if = {
				limit = { has_idea = COL_political_turmoil }
				swap_ideas = { 
					remove_idea = COL_political_turmoil
					add_idea = COL_civilwar_pataut_1
				}
				set_country_flag = COL_had_political_turmoil
			}
			if = {
				limit = { has_idea = COL_bogotazo }
				swap_ideas = { 
					remove_idea = COL_bogotazo
					add_idea = COL_civilwar_pataut_2
				}
				set_country_flag = COL_had_bogotazo
			}
			if = {
				limit = { has_idea = COL_bogotazo_2 }
				swap_ideas = { 
					remove_idea = COL_bogotazo
					add_idea = COL_civilwar_pataut_3
				}
				set_country_flag = COL_had_bogotazo_2
			}
		}
	}
}
	
COC_CW_idea_add = { #idea add for COC CW
	hidden_effect = {
		if = {
			limit = { has_country_flag = COL_had_political_turmoil }
			COC = {
				add_manpower = 1200
			}
		}
		if = {
			limit = { has_country_flag = COL_had_bogotazo }
			COC = {
				add_manpower = 1700
			}
		}
		if = {
			limit = { has_country_flag = COL_had_bogotazo_2 }
			COC = {
				add_manpower = 2200
			}
		}
		if = {
			limit = { has_country_flag = COL_had_industrialist_protest }
			COC = {
				add_ideas = COL_industrialist_protest
			}
		}
		if = {
			limit = { has_country_flag = COL_had_industrialist_protest_crushed }
			COC = {
				add_ideas = COL_industrialist_protest_crushed
			}
		}
		if = {
			limit = { has_country_flag = COL_had_armedminorities }
			COC = {
				add_ideas = COL_armedminorities
			}
		}
		if = {
			limit = { has_country_flag = COL_had_tradecongress }
			COC = {
				add_ideas = COL_tradecongress
			}
		}
	}
}

#COL_build_air_bases_event_launcher = {
	#if = {
		#limit = {
			#306 = { air_base > 1 }
			#852 = { air_base > 0 }
			#493 = { air_base > 0 }
		#}
		#country_event = { id = col.200 days = 1 }
	#}
#}